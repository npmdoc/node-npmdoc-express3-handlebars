<html><head></head><body><div class="apidocDiv">
<style>
/*csslint
*/
.apidocDiv {
    background: #fff;
    font-family: Arial, Helvetica, sans-serif;
}
.apidocDiv a[href] {
    color: #33f;
    font-weight: bold;
    text-decoration: none;
}
.apidocDiv a[href]:hover {
    text-decoration: underline;
}
.apidocCodeCommentSpan {
    background: #bbf;
    color: #000;
    display: block;
}
.apidocCodeKeywordSpan {
    color: #d00;
    font-weight: bold;
}
.apidocCodePre {
    background: #eef;
    border: 1px solid;
    color: #777;
    padding: 5px;
    white-space: pre-wrap;
}
.apidocFooterDiv {
    margin-top: 20px;
    text-align: center;
}
.apidocModuleLi {
    margin-top: 10px;
}
.apidocSectionDiv {
    border-top: 1px solid;
    margin-top: 20px;
}
.apidocSignatureSpan {
    color: #777;
    font-weight: bold;
}
</style>
<h1>api documentation for
    <a href="https://github.com/ericf/express3-handlebars">express3-handlebars (v0.5.2)</a>
</h1>
<h4>A Handlebars view engine for Express which doesn't suck.</h4>
<div class="apidocSectionDiv"><a href="#apidoc.tableOfContents" id="apidoc.tableOfContents"><h1>table of contents</h1></a><ol>

    <li class="apidocModuleLi"><a href="#apidoc.module.express3-handlebars">module express3-handlebars</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.express3-handlebars">
            function <span class="apidocSignatureSpan"></span>express3-handlebars
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars">
            function <span class="apidocSignatureSpan">express3-handlebars.</span>ExpressHandlebars
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.create">
            function <span class="apidocSignatureSpan">express3-handlebars.</span>create
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express3-handlebars.</span>ExpressHandlebars.prototype</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express3-handlebars.ExpressHandlebars">module express3-handlebars.ExpressHandlebars</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.ExpressHandlebars">
            function <span class="apidocSignatureSpan">express3-handlebars.</span>ExpressHandlebars
            <span class="apidocSignatureSpan">(config)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.getHandlebarsSemver">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.</span>getHandlebarsSemver
            <span class="apidocSignatureSpan">(handlebars)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.</span>_dirCache</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.</span>_fileCache</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">object <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.</span>_pendingReads</span>

        </li>

    </ol></li>

    <li class="apidocModuleLi"><a href="#apidoc.module.express3-handlebars.ExpressHandlebars.prototype">module express3-handlebars.ExpressHandlebars.prototype</a><ol>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._getPartialName">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_getPartialName
            <span class="apidocSignatureSpan">(filePath)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadDir">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_loadDir
            <span class="apidocSignatureSpan">(dirPath, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadFile">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_loadFile
            <span class="apidocSignatureSpan">(filePath, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._renderTemplate">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_renderTemplate
            <span class="apidocSignatureSpan">(template, context, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._resolveLayoutPath">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_resolveLayoutPath
            <span class="apidocSignatureSpan">(options)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadPartials">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadPartials
            <span class="apidocSignatureSpan">(options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplate">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadTemplate
            <span class="apidocSignatureSpan">(filePath, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplates">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadTemplates
            <span class="apidocSignatureSpan">(dirPath, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.render">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>render
            <span class="apidocSignatureSpan">(filePath, options, callback)</span>
            </a>

        </li>

        <li>

            <a class="apidocElementLiA" href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.renderView">
            function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>renderView
            <span class="apidocSignatureSpan">(viewPath, options, callback)</span>
            </a>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>extname</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>layoutsDir</span>

        </li>

        <li>

            <span class="apidocSignatureSpan">string <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>partialsDir</span>

        </li>

    </ol></li>

</ol></div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express3-handlebars" id="apidoc.module.express3-handlebars">module express3-handlebars</a></h1>


    <h2>
        <a href="#apidoc.element.express3-handlebars.express3-handlebars" id="apidoc.element.express3-handlebars.express3-handlebars">
        function <span class="apidocSignatureSpan"></span>express3-handlebars
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function exphbs(config) {
    return exphbs.create(config).engine;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars" id="apidoc.element.express3-handlebars.ExpressHandlebars">
        function <span class="apidocSignatureSpan">express3-handlebars.</span>ExpressHandlebars
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ExpressHandlebars(config) {
    config || (config = {});

    var handlebars = config.handlebars || require('handlebars');

    if ('extname'     in config) { this.extname     = config.extname;     }
    if ('layoutsDir'  in config) { this.layoutsDir  = config.layoutsDir;  }
    if ('partialsDir' in config) { this.partialsDir = config.partialsDir; }

    if(this.extname[0] !== '.') { this.extname = '.' + this.extname; }

    this.defaultLayout = config.defaultLayout;
    this.handlebars    = handlebars;
    this.helpers       = config.helpers;

    this.handlebarsVersion = ExpressHandlebars.getHandlebarsSemver(handlebars);

    this.compiled    = {};
    this.precompiled = {};

    this.engine = this.renderView.bind(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.create" id="apidoc.element.express3-handlebars.create">
        function <span class="apidocSignatureSpan">express3-handlebars.</span>create
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">create = function (config) {
    return new ExpressHandlebars(config);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...




var ExpressHandlebars = require('./lib/express-handlebars');

function exphbs(config) {
    return exphbs.<span class="apidocCodeKeywordSpan">create</span>(config).engine;
}

exphbs.create = function (config) {
    return new ExpressHandlebars(config);
};

exphbs.ExpressHandlebars = ExpressHandlebars;
...</pre></li>
    </ul>




</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express3-handlebars.ExpressHandlebars" id="apidoc.module.express3-handlebars.ExpressHandlebars">module express3-handlebars.ExpressHandlebars</a></h1>


    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.ExpressHandlebars" id="apidoc.element.express3-handlebars.ExpressHandlebars.ExpressHandlebars">
        function <span class="apidocSignatureSpan">express3-handlebars.</span>ExpressHandlebars
        <span class="apidocSignatureSpan">(config)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">function ExpressHandlebars(config) {
    config || (config = {});

    var handlebars = config.handlebars || require('handlebars');

    if ('extname'     in config) { this.extname     = config.extname;     }
    if ('layoutsDir'  in config) { this.layoutsDir  = config.layoutsDir;  }
    if ('partialsDir' in config) { this.partialsDir = config.partialsDir; }

    if(this.extname[0] !== '.') { this.extname = '.' + this.extname; }

    this.defaultLayout = config.defaultLayout;
    this.handlebars    = handlebars;
    this.helpers       = config.helpers;

    this.handlebarsVersion = ExpressHandlebars.getHandlebarsSemver(handlebars);

    this.compiled    = {};
    this.precompiled = {};

    this.engine = this.renderView.bind(this);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.getHandlebarsSemver" id="apidoc.element.express3-handlebars.ExpressHandlebars.getHandlebarsSemver">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.</span>getHandlebarsSemver
        <span class="apidocSignatureSpan">(handlebars)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">getHandlebarsSemver = function (handlebars) {
    var version = handlebars.VERSION || '';

    // Makes sure the Handlebars version is a valid semver.
    if (version &amp;&amp; !semver.valid(version)) {
        version = version.replace(/(\d\.\d)\.(\D.*)/, '$1.0-$2');
    }

    return version;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    if(this.extname[0] !== '.') { this.extname = '.' + this.extname; }

    this.defaultLayout = config.defaultLayout;
    this.handlebars    = handlebars;
    this.helpers       = config.helpers;

    this.handlebarsVersion = ExpressHandlebars.<span class="apidocCodeKeywordSpan">getHandlebarsSemver</span>(handlebars);

    this.compiled    = {};
    this.precompiled = {};

    this.engine = this.renderView.bind(this);
}
...</pre></li>
    </ul>








</div>

<div class="apidocSectionDiv">
<h1><a href="#apidoc.module.express3-handlebars.ExpressHandlebars.prototype" id="apidoc.module.express3-handlebars.ExpressHandlebars.prototype">module express3-handlebars.ExpressHandlebars.prototype</a></h1>


    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._getPartialName" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype._getPartialName">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_getPartialName
        <span class="apidocSignatureSpan">(filePath)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_getPartialName = function (filePath) {
    var extRegex = new RegExp(this.extname + '$'),
        name     = filePath.replace(extRegex, ''),
        version  = this.handlebarsVersion;

    // Fixes a Handlebars bug in versions prior to 1.0.rc.2 which caused
    // partials with "/"s in their name to not be found.
    // https://github.com/wycats/handlebars.js/pull/389
    if (version &amp;&amp; !semver.satisfies(version, '&gt;=1.0.0-rc.2')) {
        name = name.replace('/', '.');
    }

    return name;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadDir" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadDir">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_loadDir
        <span class="apidocSignatureSpan">(dirPath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadDir = function (dirPath, options, callback) {
    dirPath = path.resolve(dirPath);

    var dirCache     = ExpressHandlebars._dirCache,
        pendingReads = ExpressHandlebars._pendingReads,
        dir          = options.cache &amp;&amp; dirCache[dirPath],
        callbacks, pattern;

    if (dir) {
        callback(null, dir.concat());
        return;
    }

    callbacks = pendingReads[dirPath];

    if (callbacks) {
        callbacks.push(callback);
        return;
    }

    callbacks = pendingReads[dirPath] = [callback];
    pattern   = '**/*' + this.extname;

    glob(pattern, {cwd: dirPath}, function (err, dir) {
        if (!err) {
            dirCache[dirPath] = dir;
        }

        while (callbacks.length) {
            callbacks.shift().call(null, err, dir &amp;&amp; dir.concat());
        }

        delete pendingReads[dirPath];
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadFile" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype._loadFile">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_loadFile
        <span class="apidocSignatureSpan">(filePath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_loadFile = function (filePath, options, callback) {
    filePath = path.resolve(filePath);

    var fileCache    = ExpressHandlebars._fileCache,
        pendingReads = ExpressHandlebars._pendingReads,
        file         = options.cache &amp;&amp; fileCache[filePath],
        callbacks;

    if (file) {
        callback(null, file);
        return;
    }

    callbacks = pendingReads[filePath];

    if (callbacks) {
        callbacks.push(callback);
        return;
    }

    callbacks = pendingReads[filePath] = [callback];

    fs.readFile(filePath, 'utf8', function (err, file) {
        if (!err) {
            fileCache[filePath] = file;
        }

        while (callbacks.length) {
            callbacks.shift().call(null, err, file);
        }

        delete pendingReads[filePath];
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
        if (template) {
callback(null, template);
return;
        }

        compile = this.handlebars[precompiled ? 'precompile' : 'compile'];

        this.<span class="apidocCodeKeywordSpan">_loadFile</span>(filePath, options, function (err, file) {
if (err) { return callback(err); }

try {
    template = cache[filePath] = compile(file);
    callback(null, template);
} catch (ex) {
    callback(ex);
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._renderTemplate" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype._renderTemplate">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_renderTemplate
        <span class="apidocSignatureSpan">(template, context, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_renderTemplate = function (template, context, options, callback) {
    var output;

    try {
        output = template(context, options);
        callback(null, output);
    } catch (ex) {
        callback(ex);
    }
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
    async.parallel({
        partials: this.loadPartials.bind(this, options),
        template: this.loadTemplate.bind(this, filePath, options)
    }, callback);
}

function renderTemplate(templates, callback) {
    this.<span class="apidocCodeKeywordSpan">_renderTemplate</span>(templates.template, options, {
        helpers : helpers,
        partials: templates.partials
    }, callback);
}

// Force `{precompiled: false}` option, before passing `options` along
// to `getPartials()` and `getTemplate()` methods.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype._resolveLayoutPath" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype._resolveLayoutPath">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>_resolveLayoutPath
        <span class="apidocSignatureSpan">(options)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">_resolveLayoutPath = function (options) {
    // Makes sure to interpret falsy `options.layout` values as no layout.
    var layoutPath = 'layout' in options ? options.layout :
            this.defaultLayout;

    if (!layoutPath) {
        return null;
    }

    if (!path.extname(layoutPath)) {
        layoutPath += this.extname;
    }

    if (layoutPath[0] !== '/') {
        layoutPath = path.join(this.layoutsDir, layoutPath);
    }

    return layoutPath;
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
if (arguments.length &lt; 3 &amp;&amp; typeof options === 'function') {
    callback = options;
    options  = {};
}

options || (options = {});

var layoutPath = this.<span class="apidocCodeKeywordSpan">_resolveLayoutPath</span>(options);

function renderLayout(body, callback) {
    var context = extend({}, options, {body: body});
    this.render(layoutPath, context, callback);
}

// Simple render when no layout is used.
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadPartials" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadPartials">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadPartials
        <span class="apidocSignatureSpan">(options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loadPartials = function (options, callback) {
    if (arguments.length &lt; 2 &amp;&amp; typeof options === 'function') {
        callback = options;
        options  = {};
    }

    options || (options = {});

    function load(dirs, options, callback) {
        Array.isArray(dirs) || (dirs = [dirs]);
        var loadTemplates = this.loadTemplates.bind(this);

        async.map(dirs, function (dir, callback) {
            loadTemplates(dir, options, callback);
        }, callback);
    }

    function mapPartials(dirs, callback) {
        var getPartialName = this._getPartialName.bind(this),
            partials;

        partials = dirs.reduce(function (partials, templates) {
            Object.keys(templates).forEach(function (filePath) {
                partials[getPartialName(filePath)] = templates[filePath];
            });

            return partials;
        }, {});

        callback(null, partials);
    }

    async.waterfall([
        load.bind(this, this.partialsDir, options),
        mapPartials.bind(this)
    ], callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
```

`loadPartials()` would produce the following result:

```javascript
var hbs = require('express3-handlebars').create();

hbs.<span class="apidocCodeKeywordSpan">loadPartials</span>(function (err, partials) {
    console.log(partials);
    // =&gt; { 'foo.bar': [Function],
    // =&gt;    title: [Function] }
});
```

**Note:** The partial name `"foo.bar"` would ideally be `"foo/bar"`, but this is
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplate" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplate">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadTemplate
        <span class="apidocSignatureSpan">(filePath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loadTemplate = function (filePath, options, callback) {
    filePath = path.resolve(filePath);

    if (arguments.length &lt; 3 &amp;&amp; typeof options === 'function') {
        callback = options;
        options  = {};
    }

    options || (options = {});

    var precompiled = options.precompiled,
        cache       = precompiled ? this.precompiled : this.compiled,
        template    = options.cache &amp;&amp; cache[filePath],
        compile;

    if (template) {
        callback(null, template);
        return;
    }

    compile = this.handlebars[precompiled ? 'precompile' : 'compile'];

    this._loadFile(filePath, options, function (err, file) {
        if (err) { return callback(err); }

        try {
            template = cache[filePath] = compile(file);
            callback(null, template);
        } catch (ex) {
            callback(ex);
        }
    });
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
            callback = options;
            options  = {};
        }

        options || (options = {});

        function load(filePath, callback) {
            this.<span class="apidocCodeKeywordSpan">loadTemplate</span>(path.join(dirPath, filePath), options, callback);
        }

        function mapTemplates(filePaths, callback) {
            async.map(filePaths, load.bind(this), function (err, templates) {
if (err) { return callback(err); }

var map = filePaths.reduce(function (map, filePath, i) {
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplates" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype.loadTemplates">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>loadTemplates
        <span class="apidocSignatureSpan">(dirPath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">loadTemplates = function (dirPath, options, callback) {
    if (arguments.length &lt; 3 &amp;&amp; typeof options === 'function') {
        callback = options;
        options  = {};
    }

    options || (options = {});

    function load(filePath, callback) {
        this.loadTemplate(path.join(dirPath, filePath), options, callback);
    }

    function mapTemplates(filePaths, callback) {
        async.map(filePaths, load.bind(this), function (err, templates) {
            if (err) { return callback(err); }

            var map = filePaths.reduce(function (map, filePath, i) {
                map[filePath] = templates[i];
                return map;
            }, {});

            callback(null, map);
        });
    }

    async.waterfall([
        this._loadDir.bind(this, dirPath, options),
        mapTemplates.bind(this)
    ], callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...
app.set('view engine', 'handlebars');

// Middleware to expose the app's shared templates to the cliet-side of the app
// for pages which need them.
function exposeTemplates(req, res, next) {
    // Uses the `ExpressHandlebars` instance to get the get the **precompiled**
    // templates which will be shared with the client-side of the app.
    hbs.<span class="apidocCodeKeywordSpan">loadTemplates</span>('shared/templates/', {
cache      : app.enabled('view cache'),
precompiled: true
    }, function (err, templates) {
if (err) { return next(err); }

// RegExp to remove the ".handlebars" extension from the template names.
var extRegex = new RegExp(hbs.extname + '$');
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.render" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype.render">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>render
        <span class="apidocSignatureSpan">(filePath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">render = function (filePath, options, callback) {
    if (arguments.length &lt; 3 &amp;&amp; typeof options === 'function') {
        callback = options;
        options  = {};
    }

    options || (options = {});

    var helpers = extend({},
                this.handlebars.helpers, this.helpers, options.helpers);

    function loadTemplates(callback) {
        async.parallel({
            partials: this.loadPartials.bind(this, options),
            template: this.loadTemplate.bind(this, filePath, options)
        }, callback);
    }

    function renderTemplate(templates, callback) {
        this._renderTemplate(templates.template, options, {
            helpers : helpers,
            partials: templates.partials
        }, callback);
    }

    // Force `{precompiled: false}` option, before passing `options` along
    // to `getPartials()` and `getTemplate()` methods.
    if (options.precompiled) {
        options = extend({}, options, {precompiled: false});
    }

    async.waterfall([
        loadTemplates.bind(this),
        renderTemplate.bind(this)
    ], callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">...

    app = express();

app.engine('handlebars', exphbs({defaultLayout: 'main'}));
app.set('view engine', 'handlebars');

app.get('/', function (req, res) {
    res.<span class="apidocCodeKeywordSpan">render</span>('home');
});

app.listen(3000);
```

**views/layouts/main.handlebars:**
...</pre></li>
    </ul>



    <h2>
        <a href="#apidoc.element.express3-handlebars.ExpressHandlebars.prototype.renderView" id="apidoc.element.express3-handlebars.ExpressHandlebars.prototype.renderView">
        function <span class="apidocSignatureSpan">express3-handlebars.ExpressHandlebars.prototype.</span>renderView
        <span class="apidocSignatureSpan">(viewPath, options, callback)</span>
        </a>
    </h2>
    <ul>
    <li>description and source-code<pre class="apidocCodePre">renderView = function (viewPath, options, callback) {
    if (arguments.length &lt; 3 &amp;&amp; typeof options === 'function') {
        callback = options;
        options  = {};
    }

    options || (options = {});

    var layoutPath = this._resolveLayoutPath(options);

    function renderLayout(body, callback) {
        var context = extend({}, options, {body: body});
        this.render(layoutPath, context, callback);
    }

    // Simple render when no layout is used.
    if (!layoutPath) {
        this.render.apply(this, arguments);
        return;
    }

    // Force `{precompiled: false}` option, before passing options along to
    // `getPartials()` and `getTemplate()` methods.
    if (options.precompiled) {
        options = extend({}, options, {precompiled: false});
    }

    async.waterfall([
        this.render.bind(this, viewPath, options),
        renderLayout.bind(this)
    ], callback);
}</pre></li>
    <li>example usage<pre class="apidocCodePre">n/a</pre></li>
    </ul>








</div>

<div class="apidocFooterDiv">
    [ this document was created with
    <a href="https://github.com/kaizhu256/node-utility2" target="_blank">utility2</a>
    ]
</div>
</div>
</body></html>